{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43559338-49e51b38628b18648a05e4f59';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 40,\n    };\n\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n}","import SimpleLightbox from 'simplelightbox';\nimport Notiflix from 'notiflix';\n\nlet lightbox;\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(image => createImageCard(image)).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a');\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function createImageCard({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n        <div class=\"photo-card\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n            </div>\n        </div>\n    `;\n}\n\nexport function notify(message) {\n    Notiflix.Notify.failure(message);\n}\n\nexport function showLoadMoreButton() {\n    const loadMoreBtn = document.querySelector('.load-more');\n    loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n    const loadMoreBtn = document.querySelector('.load-more');\n    loadMoreBtn.style.display = 'none';\n}\n\n// render-functions.js\nexport function showLoadingMessage() {\n    const loadingMessage = document.getElementById('loading-message');\n    loadingMessage.classList.add('active');\n}\n\nexport function hideLoadingMessage() {\n    const loadingMessage = document.getElementById('loading-message');\n    loadingMessage.classList.remove('active');\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearGallery, notify, showLoadMoreButton, hideLoadMoreButton, showLoadingMessage, hideLoadingMessage} from './js/render-functions';\n\n\nconst form = document.getElementById('search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n    event.preventDefault();\n    \n    query = event.currentTarget.searchQuery.value.trim();\n    \n    if (query === '') {\n        iziToast.warning({\n            title: '',\n            message: 'Please enter a search query.',\n            position: 'topRight'\n        });\n        return;\n    }\n    \n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoadingMessage();\n    \n    try {\n        const data = await fetchImages(query, page);\n        hideLoadingMessage();\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n        } else {\n            renderImages(data.hits);\n            if (data.totalHits > 40) {\n                showLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        hideLoadingMessage();\n        console.error(error);\n        iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again.',\n            position: 'topRight'\n        });\n    }\n}\n\nasync function onLoadMore() {\n    page += 1;\n    showLoadingMessage();\n    try {\n        const data = await fetchImages(query, page);\n        hideLoadingMessage();\n        renderImages(data.hits);\n        if (page * 40 >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.warning({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        hideLoadingMessage();\n        console.error(error);\n        iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again.',\n            position: 'topRight'\n        });\n    }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","lightbox","renderImages","images","gallery","markup","image","createImageCard","SimpleLightbox","clearGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoadMoreButton","loadMoreBtn","hideLoadMoreButton","showLoadingMessage","hideLoadingMessage","form","onSearch","onLoadMore","event","iziToast","data","error"],"mappings":"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"}